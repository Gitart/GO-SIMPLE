**Channel** – структура данных, которая используется для взаимодействия между горутинами. Горутина может послать сообщение (значение определенного типа данных) в канал, другая горутина может прочитать сообщение из канала. Каналы могут иметь или не иметь внутренний буфер.

В первом случае при записи в канал значения добавляются во внутренний буфер, а чтение тоже производится из него. Если буфер заполнен, писатель блокируется до того момента, пока не освободится место. Если буфер пустой, то блокируется читатель при попытке чтения до тех пор, пока в буфер не поступит информация.

В случае если буфера нет, писатель блокируется, пока читатель не будет готов прочесть, аналогично блокируется читатель, пока писатель не запишет информацию.

Оператор select позволяет читать из нескольких каналов. В каком канале появится первое сообщение, тот и будет прочитан и продолжится исполнение читателя.

Канал может иметь состояние «открыт» (тогда он работает как обычно – можно читать и писать) и «закрыт» (предполагается, что канал более не нужен и записывать больше ничего нельзя в такой канал).

Оператор `select` позволяет читать из нескольких каналов. В каком канале появится первое сообщение, тот и будет прочитан и продолжится исполнение читателя.

Канал может иметь состояние «открыт» (тогда он работает как обычно – можно читать и писать) и «закрыт» (предполагается, что канал более не нужен и записывать больше ничего нельзя в такой канал).

### Поведение небуферизованного канала:

|               |                  |                                                                                             |                                      |
| ------------- | ---------------- | ------------------------------------------------------------------------------------------- | ------------------------------------ |
| **состояние** | **действие**     | **результат**                                                                               | **пример**                           |
| открыт        | чтение (receive) | если писатель готов, то чтение или ожидание информации в канале                             | <https://go.dev/play/p/-kZO7U3pEPY>  |
| открыт        | запись (send)    | если читатель готов, то запись или ожидание, пока не будет готов                            | <https://go.dev/play/p/gOJ8PP5ID6C>  |
| открыт        | select           | чтение из первого канала, где есть информация либо переход в default ветку (если объявлена) | <https://go.dev/play/p/qsQJixb1J4l>  |
| закрыт        | чтение (receive) | чтение нулевого значения заданного типа (без ожидания)                                      | <https://go.dev/play/p/mZ-a-uau1qP>  |
| закрыт        | запись (send)    | паника                                                                                      | <https://go.dev/play/p/i1M9adPQIiP>  |
| закрыт        | select           | чтение нулевого значения заданного типа (без ожидания)                                      | <https://go.dev/play/p/TG-PwYPh3e_h> |
| nil           | чтение (receive) | читатель блокируется навсегда                                                               | <https://go.dev/play/p/_iXBO6_C3oC>  |
| nil           | запись (send)    | писатель блокируется навсегда                                                               | <https://go.dev/play/p/_iXBO6_C3oC>  |
| nil           | select           | пропускает канал                                                                            | <https://go.dev/play/p/p5SfXeSezWW>  |


## Поведение буферизованного 
канала практически аналогичное, но с учетом наличия внутреннего буфера. В случае закрытия канала туда нельзя будет более записывать значения, но при чтении будут сначала прочитаны все, которые имеются в буфере, а после этого поведение будет как у небуферизированного – будут возвращаться нулевые значения соответствующего типа:

|        |                  |                                                                                                           |                                     |
| ------ | ---------------- | --------------------------------------------------------------------------------------------------------- | ----------------------------------- |
| открыт | чтение (receive) | если есть информация в буфере, то чтение или ожидание появления информации                                | <https://go.dev/play/p/5vq_JEUH1de> |
| открыт | запись (send)    | если в буфере есть пустое место – запись, если нет – ожидание, пока не появится                           | <https://go.dev/play/p/CcQM-CQe2WE> |
| открыт | select           | чтение из первого канала, в буфере которого есть информация либо переход в default ветку (если объявлена) | <https://go.dev/play/p/p6BfZmwEmdd> |
| закрыт | чтение (receive) | чтение всех значений из буфера, а после – чтение нулевого значения заданного типа (без ожидания)          | <https://go.dev/play/p/3RFfAvLpWe2> |
| закрыт | запись (send)    | паника                                                                                                    | <https://go.dev/play/p/XTL48XHMwNp> |
| закрыт | select           | чтение всех значений из буфера, а после – чтение нулевого значения заданного типа (без ожидания)          | <https://go.dev/play/p/yVqQ-DnWd2B> |
| nil    | чтение (receive) | читатель блокируется навсегда                                                                             | <https://go.dev/play/p/P6NzkZvgdAk> |
| nil    | запись (send)    | писатель блокируется навсегда                                                                             | <https://go.dev/play/p/P6NzkZvgdAk> |
| nil    | select           | пропускает канал                                                                                          | <https://go.dev/play/p/N2G72DkTPFY> |

Пожалуй, это все, что я хотел рассказать. Надеюсь, что эта небольшая заметка поможет кому-то и, возможно, окажется полезной как напоминание, так как иногда, не работая долго с той или иной структурой данных, можно забыть особенности ее поведения.
