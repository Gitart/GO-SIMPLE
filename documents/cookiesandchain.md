
## Работа с куками и очередями

```golang
package main
import("time";"net/http";"fmt";"os")

/********************************************************************************************************************************************
    Main procedure
********************************************************************************************************************************************/
func main() {

    // Router
    http.HandleFunc("/",          Infocookie)
    http.HandleFunc("/write/",    Writecookie)
    http.HandleFunc("/read/",     Readcookie)
    http.HandleFunc("/del/",      Deletecookie)
    http.HandleFunc("/doc/",      Doc)
    http.HandleFunc("/docr/",     Docr)
    http.HandleFunc("/docs/",     Docs)
    http.HandleFunc("/docadd/",   Docadd)

    // Info obout service
    fmt.Println(v)

    // перменные окружения
    St:=" Version    : "   + os.Getenv("VERSION")  +
        "\n Date       : " + os.Getenv("DATAVERS") +
        "\n Secret key : " + os.Getenv("SECKEY")   +
        "\n ID key     : " + os.Getenv("IDKEY")

    fmt.Println(St)

    // os.Environ() - массив всех перемнных окуржения
    Sss:=http.StateNew

    fmt.Println(Sss)

    // Listen port
    http.ListenAndServe(":2222", nil)
}

/********************************************************************************************************************************************
     Чтение кук
********************************************************************************************************************************************/
func Infocookie(w http.ResponseWriter, req *http.Request) {
    fmt.Fprintln(w, info)
}

/********************************************************************************************************************************************
     Чтение кук
********************************************************************************************************************************************/
func Readcookie(w http.ResponseWriter, req *http.Request) {

   // Все кукуи
   cu:=req.Cookies()

   if cu==nil{
      Fmt(w, "Cookies is Null.")
      return
   }

   //Чтение кук
   cj,_:=req.Cookie("test")
   cp,_:=req.Cookie("Pass")
   cl,_:=req.Cookie("Pa")
   cm,_:=req.Cookie("Paminuta")

  Fmt(w, Htl)
  Fmt(w, cu, "<br>")
  Fmt(w, cu[0], "<br>")
  Fmt(w, len(cu),"<br>")
  Fmt(w, cj,"<br>")
  Fmt(w, cp,"<br>")
  Fmt(w, cm,"<br>")

   // Проверка наличия кук
   if cl==nil{
      Fmt(w, "Kuk no","<br>")
   }  else {
         Fmt(w, "Kuka YES", cp,"<br>")
   }

   // Проверка наличия кук
   if cm==nil{
      Fmt(w, Htlout)
   }  else {
         Fmt(w, Htlin)
   }

      Fmt(w, Htlend)
}

/*******************************************************************************************************************************************
    Установка кук на разное время
    Год час 3 часа минута
********************************************************************************************************************************************/
func Writecookie(w http.ResponseWriter, req *http.Request) {

 // Установка на год
    cookie := &http.Cookie{Name:"test", Value:"tcookie", Expires:time.Now().Add(356*24*time.Hour), HttpOnly:true, Path: "/"}
    http.SetCookie(w, cookie)

 // Установка на три часа
    cookie = &http.Cookie{Name:"Pass", Value:"Secret", Expires:time.Now().Add(3*time.Hour), HttpOnly:true, Path: "/"}
    http.SetCookie(w, cookie)

 // Установка на час
    cookie = &http.Cookie{Name:"Pa", Value:"Secret pa", Expires:time.Now().Add(1*time.Hour), HttpOnly:true,  Path: "/"}
    http.SetCookie(w, cookie)

 // Установка на мин
 // t:=time.Now().Add(1*time.Minute).String()
    cookie = &http.Cookie{Name:"Paminuta", Value:"Set minute one in server.", Expires:time.Now().Add(1*time.Minute), HttpOnly:true, Path: "/"}
    http.SetCookie(w, cookie)
    Fmt(w, Hb)
}

/********************************************************************************************************************************************
    Удаление кук
********************************************************************************************************************************************/
func Deletecookie(w http.ResponseWriter, req *http.Request) {
     cookie := &http.Cookie{Name:"test", Value:"tcookie DELETE", Expires:time.Now().Add(-1*time.Hour),HttpOnly:true, Path: "/"}
      http.SetCookie(w, cookie)
     Fmt(w, Lm)
}

/********************************************************************************************************************************************
    Описание кук
********************************************************************************************************************************************/
func Doc(w http.ResponseWriter, req *http.Request) {
     Fmt(w, H)
     Fmt(w,"Документация по кукам.","Примері и прочее","Повторное использование документации." )
}

// Описание массива очереди на 100 єленментов как глобальную переменную
var CC =make (chan string,100)

/********************************************************************************************************************************************

   Создание очереди на 10 єлементов

********************************************************************************************************************************************/
func Docs(w http.ResponseWriter, req *http.Request) {

   CC<-"Коля"
   CC<-"Вася"
   CC<-"Петя"
   CC<-"Катя"
   CC<-"Оля"
   CC<-"Лена"
   CC<-"Никтка"
   CC<-"Герда"
   CC<-"Леся"
   CC<-"Абрам"

   Fmt(w,"Заполнен список" )
}

/********************************************************************************************************************************************

   Чтение из очереди

********************************************************************************************************************************************/
func Docr(w http.ResponseWriter, req *http.Request) {

      Fmt(w,<-CC, "Осталось от єлементов в очереди ", len(CC) )
}

/********************************************************************************************************************************************

 Добавление в очередь на ходу

********************************************************************************************************************************************/
func Docadd(w http.ResponseWriter, r *http.Request) {
 // d:=r.URL.Path

      Param := r.URL.Path[len("/docadd/"):]
      CC <-Param
      Fmt(w,"Добавлен параметрер в очередь" + Param)
}

// ****************************************************************************************
//
// Интерфейс используется в том случае когда мы не знаем какой
// тип данных попадает на вход
// На вход попадают и тип куки и стринг и []Cookie
// Если входніе параметры постаить опредленного типа то постоянно необходимо
// думать о преобразовании типа перд использованием в стринг (например)
//
// ****************************************************************************************
func Fmt (w http.ResponseWriter, Ar ...interface{}){
    for _, i:=range(Ar){
          fmt.Fprintln(w,i)
    }

}
```
